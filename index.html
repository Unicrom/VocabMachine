<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Vocab Machine 2001</title>
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>
    <!-- SVG Icon Sprite -->
    <svg xmlns="http://www.w3.org/2000/svg" style="position:absolute;width:0;height:0;overflow:hidden" aria-hidden="true" focusable="false">
      <symbol id="icon-add" viewBox="0 0 24 24"><path d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2z"/></symbol>
      <symbol id="icon-copy" viewBox="0 0 24 24"><path d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z"/></symbol>
      <symbol id="icon-trash" viewBox="0 0 24 24"><path d="M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"/></symbol>
      <symbol id="icon-save" viewBox="0 0 24 24"><path d="M17 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V7l-4-4zm-5 16c-1.66 0-3-1.34-3-3s1.34-3 3-3 3 1.34 3 3-1.34 3-3 3zm3-10H5V5h10v4z"/></symbol>
      <symbol id="icon-download" viewBox="0 0 24 24"><path d="M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"/></symbol>
      <symbol id="icon-play" viewBox="0 0 24 24"><path d="M8 5v14l11-7z"/></symbol>
      <symbol id="icon-close" viewBox="0 0 24 24"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></symbol>
      <symbol id="icon-check" viewBox="0 0 24 24"><path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/></symbol>
      <symbol id="icon-eye" viewBox="0 0 640 640"><path d="M320 96C239.2 96 174.5 132.8 127.4 176.6C80.6 220.1 49.3 272 34.4 307.7C31.1 315.6 31.1 324.4 34.4 332.3C49.3 368 80.6 420 127.4 463.4C174.5 507.1 239.2 544 320 544C400.8 544 465.5 507.2 512.6 463.4C559.4 419.9 590.7 368 605.6 332.3C608.9 324.4 608.9 315.6 605.6 307.7C590.7 272 559.4 220 512.6 176.6C465.5 132.9 400.8 96 320 96zM176 320C176 240.5 240.5 176 320 176C399.5 176 464 240.5 464 320C464 399.5 399.5 464 320 464C240.5 464 176 399.5 176 320zM320 256C320 291.3 291.3 320 256 320C244.5 320 233.7 317 224.3 311.6C223.3 322.5 224.2 333.7 227.2 344.8C240.9 396 293.6 426.4 344.8 412.7C396 399 426.4 346.3 412.7 295.1C400.5 249.4 357.2 220.3 311.6 224.3C316.9 233.6 320 244.4 320 256z"/></symbol>
      <symbol id="icon-eye-off" viewBox="0 0 640 640"><path d="M73 39.1C63.6 29.7 48.4 29.7 39.1 39.1C29.8 48.5 29.7 63.7 39 73.1L567 601.1C576.4 610.5 591.6 610.5 600.9 601.1C610.2 591.7 610.3 576.5 600.9 567.2L504.5 470.8C507.2 468.4 509.9 466 512.5 463.6C559.3 420.1 590.6 368.2 605.5 332.5C608.8 324.6 608.8 315.8 605.5 307.9C590.6 272.2 559.3 220.2 512.5 176.8C465.4 133.1 400.7 96.2 319.9 96.2C263.1 96.2 214.3 114.4 173.9 140.4L73 39.1zM236.5 202.7C260 185.9 288.9 176 320 176C399.5 176 464 240.5 464 320C464 351.1 454.1 379.9 437.3 403.5L402.6 368.8C415.3 347.4 419.6 321.1 412.7 295.1C399 243.9 346.3 213.5 295.1 227.2C286.5 229.5 278.4 232.9 271.1 237.2L236.4 202.5zM357.3 459.1C345.4 462.3 332.9 464 320 464C240.5 464 176 399.5 176 320C176 307.1 177.7 294.6 180.9 282.7L101.4 203.2C68.8 240 46.4 279 34.5 307.7C31.2 315.6 31.2 324.4 34.5 332.3C49.4 368 80.7 420 127.5 463.4C174.6 507.1 239.3 544 320.1 544C357.4 544 391.3 536.1 421.6 523.4L357.4 459.2z"/></symbol>
      <symbol id="icon-chevron-left" viewBox="0 0 24 24"><path d="M15.41 7.41 14 6l-6 6 6 6 1.41-1.41L10.83 12z"/></symbol>
      <symbol id="icon-upload" viewBox="0 0 24 24"><path d="M5 20h14v-2H5v2zM11 8v6h2V8h3l-4-4-4 4h3z"/></symbol>
      <symbol id="icon-file-text" viewBox="0 0 24 24"><path d="M14 2H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V8l-6-6zm1 14H9v-2h6v2zm0-4H9v-2h6v2zm-3-5V3.5L18.5 9H12z"/></symbol>
      <symbol id="icon-refresh" viewBox="0 0 24 24"><path d="M17.65 6.35A7.95 7.95 0 0 0 12 4V1L7 6l5 5V8c2.76 0 5 2.24 5 5a5 5 0 0 1-9.9 1H5.02A7 7 0 0 0 19 13c0-2.21-.9-4.21-2.35-5.65z"/></symbol>
      <symbol id="icon-warning" viewBox="0 0 24 24"><path d="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z"/></symbol>
      <symbol id="icon-gear" viewBox="0 0 24 24"><path d="M19.14 12.94c.04-.31.06-.63.06-.94 0-.31-.02-.63-.07-.94l2.03-1.58a.5.5 0 0 0 .12-.64l-1.92-3.32a.5.5 0 0 0-.6-.22l-2.39.96a7.14 7.14 0 0 0-1.63-.94l-.36-2.54A.5.5 0 0 0 14.89 2h-3.78a.5.5 0 0 0-.5.42l-.37 2.54c-.6.24-1.16.55-1.68.93l-2.39-.96a.5.5 0 0 0-.6.22L3.65 8.01a.5.5 0 0 0 .12.64l2.03 1.58c-.05.31-.08.65-.08.98 0 .31.02.63.07.94l-2.03 1.58a.5.5 0 0 0-.12.64l1.92 3.32c.14.24.43.34.68.22l2.39-.96c.5.38 1.05.7 1.64.94l.37 2.54c.04.24.25.42.5.42h3.78c.25 0 .46-.18.5-.42l.37-2.54c.6-.24 1.16-.55 1.68-.93l2.39.96c.25.12.54.02.68-.22l1.92-3.32a.5.5 0 0 0-.12-.64l-2.03-1.58zM12 15.5a3.5 3.5 0 1 1 0-7 3.5 3.5 0 0 1 0 7z"/></symbol>
      <symbol id="icon-menu" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6zm0 5h18v2H3v-2zm0 5h18v2H3v-2z"/></symbol>
    </svg>
    <header class="app-header">
      <h1>Vocab Machine 2001</h1>
      <nav class="tabs" role="tablist" aria-label="Primary">
        <button class="tab active" data-tab="lists" role="tab" aria-selected="true">Lists</button>
        <button class="tab" data-tab="study" role="tab" aria-selected="false">Study</button>
      </nav>
    </header>

    <main>

    <!-- Generic Dialog Modal -->
    <div id="app-dialog" class="modal-overlay hidden" aria-hidden="true">
      <div class="modal small" role="dialog" aria-modal="true" aria-labelledby="app-dialog-title">
        <div class="modal-header">
          <h3 id="app-dialog-title">Dialog</h3>
          <button type="button" id="app-dialog-close" class="icon-btn" aria-label="Close dialog"><svg class="icon"><use href="#icon-close"/></svg></button>
        </div>
        <div class="modal-body" id="app-dialog-body"></div>
        <form id="app-dialog-form" class="modal-form" autocomplete="off">
          <div class="dialog-input-wrap hidden" id="app-dialog-input-wrap">
            <input type="text" id="app-dialog-input" />
          </div>
          <div class="modal-footer" id="app-dialog-buttons" style="display:flex; gap:10px; justify-content:flex-end;">
            <!-- buttons inserted dynamically -->
          </div>
        </form>
      </div>
    </div>

      <!-- Lists Panel (Overview + Detail) -->
      <section id="panel-lists" class="panel active" role="tabpanel" aria-labelledby="Lists">
        <!-- Overview -->
        <div id="lists-overview" class="lists-overview">
          <div class="panel-header lists-bar">
              <input id="list-search" class="full-search" type="search" placeholder="Search lists & words…" aria-label="Search lists" />
              <div class="lists-bar-actions" style="display:flex; gap:8px;">
                <button id="btn-new-list" class="primary icon-btn" aria-label="New List" title="New List"><svg class="icon" aria-hidden="true"><use href="#icon-add"/></svg></button>
                <input id="import-file" type="file" accept="application/json" class="hidden" />
                <button id="btn-import" class="icon-btn" aria-label="Import Lists (JSON)" title="Import Lists (JSON)"><svg class="icon" aria-hidden="true"><use href="#icon-upload"/></svg></button>
              </div>
          </div>
          <div id="list-cards" class="list-cards" aria-live="polite"></div>
        </div>

        <!-- Detail -->
        <div id="list-detail" class="list-detail hidden" aria-live="polite">
          <div class="detail-header">
            <div class="left">
              <button id="btn-back-lists" class="icon-btn" aria-label="Back to Lists" title="Back to Lists"><svg class="icon" aria-hidden="true"><use href="#icon-close"/></svg></button>
              <input id="detail-title" type="text" class="title-input" placeholder="List name" aria-label="List name" />
            </div>
            <div class="detail-actions">
              <button id="btn-duplicate-list" class="icon-btn" aria-label="Duplicate List" title="Duplicate List"><svg class="icon" aria-hidden="true"><use href="#icon-copy"/></svg></button>
              <button id="btn-delete-list" class="danger icon-btn" aria-label="Delete List" title="Delete List"><svg class="icon" aria-hidden="true"><use href="#icon-trash"/></svg></button>
              <button id="btn-export-current" class="icon-btn" aria-label="Export This List" title="Export This List"><svg class="icon" aria-hidden="true"><use href="#icon-download"/></svg></button>
            </div>
          </div>
            <div class="list-detail-body">
            <div class="list-meta-inline bare">
              <input id="word-search" type="search" placeholder="Search words…" />
              <button id="btn-new-word" class="primary icon-btn" aria-label="Add New Word" title="Add New Word"><svg class="icon" aria-hidden="true"><use href="#icon-add"/></svg></button>
            </div>
            <div class="words-table">
              <div class="table-actions"></div>
              <table>
                <thead>
                  <tr>
                    <th style="width: 18rem;">Word</th>
                    <th>Definition</th>
                    <th>Synonyms</th>
                    <th>Antonyms</th>
                  </tr>
                </thead>
                <tbody id="words-tbody"></tbody>
              </table>
            </div>
          </div>
        </div>
      </section>

      <!-- Study Panel (Redesigned) -->
      <section id="panel-study" class="panel" role="tabpanel" aria-labelledby="Study">
        <div class="study-layout">
          
          <!-- Right Session Area -->
          <div class="study-session-wrap">
            <!-- Toggle moved outside config -->
            <div class="session-top">
              <div class="progress-bar" aria-hidden="false"><div id="progress-bar-inner" class="inner" style="width:0%"></div></div>
              <div class="stat-chips">
                <div class="chip-stat"><span id="chip-attempts">0</span><label>Attempts</label></div>
                <div class="chip-stat"><span id="chip-accuracy">0%</span><label>Accuracy</label></div>
                <div class="chip-stat"><span id="chip-streak">0</span><label>Streak</label></div>
                <button id="toggle-setup" class="collapse-toggle" aria-label="Hide setup" title="Hide setup"><svg class="icon collapse-icon-eye" aria-hidden="true"><use href="#icon-eye"/></svg><svg class="icon collapse-icon-eye-off hidden" aria-hidden="true"><use href="#icon-eye-off"/></svg></button>
            </div>
            </div>
            <div id="session-placeholder" class="session-placeholder">
              <h3>Ready to study?</h3>
              <p>Select lists and press <strong>Start Session</strong> to begin. Your progress, accuracy and streak will appear here.</p>
            </div>
            <div id="session" class="session redesigned hidden" aria-live="polite">
              <div id="prompt" class="prompt"></div>
              <form id="answer-form" class="answer-area" autocomplete="off">
                <div id="answer-input-area" class="answer-input-area"></div>
                <div class="answer-actions">
                  <button type="submit" class="primary icon-btn" aria-label="Submit Answer" title="Submit Answer"><svg class="icon" aria-hidden="true"><use href="#icon-check"/></svg></button>
                  <button type="button" id="btn-show-answer" class="icon-btn" aria-label="Show Answer" title="Show Answer"><svg class="icon" aria-hidden="true"><use href="#icon-eye"/></svg></button>
                </div>
              </form>
              <div id="feedback" class="feedback" aria-live="polite"></div>
            </div>
          </div>
          <!-- Left Config Column -->
            <aside class="study-config" id="study-config">
              <div class="config-block">
                <label class="config-label">Lists</label>
                <div class="list-chips selectable" id="study-list-chips" aria-label="Select lists to study" role="list"></div>
              </div>
              <div class="config-block">
                <label class="config-label">Content Type</label>
                <div class="content-tabs modern" role="tablist" aria-label="Content Type">
                  <button class="content-tab active" data-content="spelling" role="tab" aria-selected="true">Spelling</button>
                  <button class="content-tab" data-content="definition" role="tab" aria-selected="false">Definition</button>
                  <button class="content-tab" data-content="synonym" role="tab" aria-selected="false">Synonym</button>
                  <button class="content-tab" data-content="antonym" role="tab" aria-selected="false">Antonym</button>
                </div>
              </div>
                <div>
                  <label class="config-label" for="session-mode">Mode</label>
                  <select id="session-mode" class="full-select">
                    <option value="normal" selected>Normal</option>
                    <option value="learning">Learning</option>
                    <option value="test">Test</option>
                  </select>
                </div>
                <div id="syn-ant-wrapper">
                  <label class="config-label" for="syn-ant-prompt">Syn/Ant Prompt</label>
                  <select id="syn-ant-prompt" class="full-select">
                    <option value="random" selected>Random</option>
                    <option value="all">All</option>
                  </select>
                </div>
              <div class="config-block">
                <button id="direction-label" class="direction-toggle" title="Toggle direction">Match <span>answer</span> to Word</button>
              </div>
              <div class="config-block start-block start-end-row">
                <button id="btn-start-study" class="primary start-btn" aria-label="Start Session"><span>Start Session</span></button>
                <button id="btn-end-session" class="danger start-btn hidden" aria-label="End Session">End</button>
              </div>
              <div class="config-hint">
                <small class="muted">Tip: In Learning mode, missed words reappear sooner.</small>
              </div>
            </aside>
        </div>
      </section>

    </main>

    <footer class="app-footer">
      <small>Made for personal study • Data stays on this device</small>
    </footer>

    <!-- Word Modal -->
    <div id="word-modal" class="modal-overlay hidden" role="dialog" aria-modal="true" aria-labelledby="word-modal-title">
      <div class="modal" data-mode="new">
        <div class="modal-header">
          <h3 id="word-modal-title">Add Word</h3>
          <button id="btn-close-word-modal" class="icon-btn" aria-label="Close"><svg class="icon" aria-hidden="true"><use href="#icon-close"/></svg></button>
        </div>
        <form id="word-form" autocomplete="off">
          <div class="grid-2">
            <label>Word
              <input id="word-input" type="text" />
            </label>
            <label>Example sentence (optional)
              <input id="example-input" type="text" />
            </label>
          </div>
          <label>Definition
            <textarea id="definition-input" rows="3"></textarea>
          </label>
          <div class="grid-2">
            <label>Synonyms (comma-separated)
              <input id="synonyms-input" type="text" />
            </label>
            <label>Antonyms (comma-separated)
              <input id="antonyms-input" type="text" />
            </label>
          </div>
          <div class="modal-footer form-actions">
            <button id="btn-add-word" class="primary icon-btn" aria-label="Save Word" title="Save Word"><svg class="icon" aria-hidden="true"><use href="#icon-check"/></svg></button>
            <button id="btn-reset-word" type="button" class="icon-btn" aria-label="Reset" title="Reset"><svg class="icon" aria-hidden="true"><use href="#icon-refresh"/></svg></button>
            <button id="btn-delete-word" type="button" class="danger icon-btn hidden" aria-label="Delete Word" title="Delete Word"><svg class="icon" aria-hidden="true"><use href="#icon-trash"/></svg></button>
          </div>
        </form>
      </div>
    </div>

    <script type="module" src="src/main.js"></script>
  </body>
  </html>
